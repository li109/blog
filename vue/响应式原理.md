# Vue2.0源码阅读笔记（二）：响应式原理
&emsp;&emsp;Vue是数据驱动的框架，在修改数据时，视图会进行更新。数据响应式系统使得状态管理变的简单直接，在开发过程中减少与DOM元素的接触。而深入学习其中的原理十分有必要，能够回避一些常见的问题，使开发变的更为高效。<br/>
## 一、概述
&emsp;&emsp;Vue源码中对数据响应式系统的实现比较复杂，在深入学习这部分源码之前，先简述其原理，并尝试手动实现一个较为简单的版本更有助于后续的理解。<br/>
### 1、Vue数据响应式原理简述
&emsp;&emsp;Vue使用**观察者模式**（又称**发布-订阅模式**）加**数据劫持**的方式实现数据响应式系统，劫持数据使其被访问时收集依赖，改变时触发依赖。<br/>
&emsp;&emsp;假设 b 是对象 a 的数据属性，数据 b 变成响应式数据的过程如下图所示：<br/>
![响应式原理概述](../image/vue/observe_1.jpg)
&emsp;&emsp;首先，通过 observe 函数调用 Object.defineProperty 方法将**数据属性** b 变成**访问器属性**。Object.defineProperty 是 ES5 中一个无法 shim 的特性，因此Vue 不支持 IE8 以及更低版本浏览器。改造后的访问器属性通过闭包引用变量 dep ，在 b 的 getter 中除了能返回属性值以外，在数据被读取时，还能收集依赖；在 setter 中，除了能设置属性值以外，当值发生改变时，还能够触发属性的全部依赖。<br/>
&emsp;&emsp;然后，在对数据 b 进行观测时，会将数据 b 以及回调函数作为参数传入 Watcher 构造函数，并将 Dep 的静态属性 target 指向 Watcher 的实例对象。函数 Dep 用于生成存放依赖的容器。<br/>
&emsp;&emsp;Watcher 函数会读取数据 b ，进而调用 b 的 getter 方法。b 通过闭包引用着属于自己的依赖容器 dep ，在 getter 中调用 dep.depend() 方法将 Dep.target 中的值（即数据 b 的观察者对象）推入到容器 dep 中，完成依赖收集。<br/>
&emsp;&emsp;当 b 的值改变时，setter 中的 dep.notify() 方法被调用，该方法遍历 dep 中的观察者对象，逐个调用观察者对象上的回调方法，完成对依赖的触发。<br/>
### 2、响应式系统简单实现
&emsp;&emsp;<br/>
## 二、observe
### 1、处理纯对象
### 2、处理数组
## 三、Dep
&emsp;&emsp;<br/>
## 四、Watcher
&emsp;&emsp;<br/>